(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();class C{constructor(){this.windows=[]}bringToFront(){this.windows.forEach(e=>{e.getItemContainer().style.zIndex="1"})}pushWindow(e){this.windows.push(e)}}class w{constructor(e,t,i,n,s,a,r){this.id=a,this.zIndexController=r,this.z=10,this.droppableArea=document.querySelector("main")??document.createElement("main"),this.drop=document.getElementById("drop")??document.createElement("div"),this.itemElement=document.createElement("div"),this.itemElement.classList.add("item"),this.itemElement.id="item",this.itemElement.style.top="15px",this.itemElement.style.width=n+"px",this.itemElement.style.height=s+"px";const o=document.createElement("div");o.classList.add("windowEdit"),o.setAttribute("draggable","true");const h=document.createElement("img");h.src=t,h.classList.add("logo");const m=document.createElement("p");m.classList.add("windowTitleText"),m.innerHTML=i;const c=document.createElement("button");c.classList.add("exitWindow"),c.textContent="❌",o.appendChild(c),o.appendChild(h),o.appendChild(m),this.itemElement.appendChild(o),this.itemElement.appendChild(e),this.drop.appendChild(this.itemElement),o.addEventListener("dragstart",this.dragStartHandler.bind(this)),this.itemElement.addEventListener("mousedown",this.mousedown.bind(this)),o.addEventListener("drag",this.dragHandler.bind(this)),c.addEventListener("click",this.exit.bind(this)),this.droppableArea.addEventListener("dragover",p=>{console.log(p),p.preventDefault()})}getItemContainer(){return this.itemElement}dragStartHandler(e){this.initialLeft=this.itemElement.offsetLeft,this.initialTop=this.itemElement.offsetTop,this.initialMouseX=e.clientX,this.initialMouseY=e.clientY,e.dataTransfer.dropEffect="move"}mousedown(){this.zIndexController.bringToFront(),this.itemElement.style.zIndex="10"}dragHandler(e){this.itemElement.style.left=this.initialLeft+e.clientX-this.initialMouseX+"px",this.itemElement.style.top=this.initialTop+e.clientY-this.initialMouseY+"px"}exit(){this.drop?.removeChild(this.itemElement)}}const E="/assets/1-7d2f2717.png",y="/assets/2-7de6b074.png",L="/assets/3-6c7e52d4.png",b="/assets/4-5cd56ea0.png",v="/assets/back-77c6763f.png";class k{constructor(){this.cardId=0,this.tabindex=0,this.cards=[],this.initCards(),this.container=document.createElement("div"),this.hasNotWon=!0,this.counter=0,this.container.classList.add("memoryContainer"),this.flippedCards=[],this.matchedCards=[],this.shuffleCards(),this.draw()}initCards(){for(let e=0;e<4;e++)for(let t=0;t<4;t++)this.cards.push({imageSrc:new URL(Object.assign({"/img/memory/1.png":E,"/img/memory/2.png":y,"/img/memory/3.png":L,"/img/memory/4.png":b,"/img/memory/back.png":v})[`/img/memory/${t+1}.png`],self.location).href,flipped:!1,matched:!1})}get getContainer(){return this.container}flipCard(e){this.flippedCards.length<2&&(e.flipped=!0,this.flippedCards.push(e),this.flippedCards.length>=2&&(this.flippedCards[0].imageSrc===this.flippedCards[1].imageSrc?(this.flippedCards[0].matched=!0,this.flippedCards[1].matched=!0,this.flippedCards[0].flipped=!1,this.flippedCards[1].flipped=!1,this.matchedCards.push(...this.flippedCards),this.flippedCards=[]):setTimeout(()=>{this.flippedCards[0].flipped=!1,this.flippedCards[1].flipped=!1,this.flippedCards=[],this.draw()},500)))}shuffleCards(){for(let e=this.cards.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[this.cards[e],this.cards[t]]=[this.cards[t],this.cards[e]]}}isGameOver(){return this.matchedCards.length===this.cards.length&&this.matchedCards.length>0}draw(){this.container.innerHTML="";for(const i of this.cards){const n=document.createElement("button");if(this.tabindex++,n.classList.add("card-image"),i.matched||i.flipped?n.style.backgroundImage="url("+i.imageSrc.toString()+")":n.style.backgroundImage="url("+new URL("/assets/back-77c6763f.png",self.location).toString()+")",n.addEventListener("click",()=>{i.flipped||(new Audio(new URL("/assets/memorySound-d5a040f7.wav",self.location).toString()).play(),this.flipCard(i),this.draw())}),n.addEventListener("keydown",s=>{console.log("keydown"),s.key==="Enter"&&(i.flipped||(new Audio(new URL("/assets/memorySound-d5a040f7.wav",self.location).toString()).play(),this.flipCard(i),this.draw()))}),this.isGameOver()||(this.container.appendChild(n),this.counter++),this.isGameOver()===this.hasNotWon){console.log("Won the game"),this.hasNotWon=!1;const s=document.createElement("h1");s.innerHTML="Victory";const a=document.createElement("button");a.textContent="Restart Game",a.addEventListener("click",()=>{this.flippedCards=[],this.matchedCards=[],this.cards=[],this.hasNotWon=!0,this.initCards(),this.shuffleCards(),this.draw()}),this.container.appendChild(s),this.container.appendChild(a)}this.cardId=0}const e=document.querySelectorAll("section");let t=0;document.addEventListener("keydown",i=>{i.key==="ArrowRight"?(e[t].classList.remove("highlight"),t=(t+1)%e.length,e[t].classList.add("highlight"),e[t].focus()):i.key==="ArrowLeft"&&(e[t].classList.remove("highlight"),t=(t-1+e.length)%e.length,e[t].classList.add("highlight"),e[t].focus())})}}class M{constructor(){this.isItMeWhoSent=!1,this.container=document.createElement("div"),this.container.id="cont",this.container.classList.add("memoryContainer"),this.checkIfUserExistsAndStartApp()}get getContainer(){return this.container}draw(){this.container.innerHTML="",this.chat=document.createElement("div");const e=document.createElement("div"),t=document.createElement("input");t.classList.add("chatText"),t.type="text",t.tabIndex=2,t.placeholder="Press enter to send",t.addEventListener("keydown",i=>{if(i.key==="Enter"){const n={type:"message",data:t.value,username:this.username,channel:"channel",key:"eDBE76deU7L0H9mEBgxUKVR0VCnq0XBd"};t.value="",this.isItMeWhoSent=!0,this.webSocket.send(JSON.stringify(n))}}),e.classList.add("inputElement"),this.chat.classList.add("chatDiv"),e.appendChild(t),this.container.appendChild(this.chat),this.container.appendChild(e)}drawUsernameScreen(){const e=document.createElement("input");e.type="text",e.placeholder="Create a username",e.addEventListener("keydown",()=>{e.value!=null&&(this.username=e.value,localStorage.setItem("user",this.username),this.startMainApp())})}startMainApp(){this.webSocket=new WebSocket("wss://courselab.lnu.se/message-app/socket"),this.webSocket.onmessage=e=>{this.drawMessage(e.data)},this.draw()}checkIfUserExistsAndStartApp(){if(localStorage.getItem("user")===null){const e=document.createElement("h1");e.innerHTML="Please select a username";const t=document.createElement("input");t.type="text",t.placeholder="Create a username",t.addEventListener("keydown",i=>{i.key==="Enter"&&t.value!==null&&(this.username=t.value,localStorage.setItem("user",this.username),this.container.removeChild(t),this.container.removeChild(e),console.log("starting main app"),this.startMainApp())}),this.container.appendChild(e),this.container.appendChild(t)}else this.username=localStorage.getItem("user")??"",console.log(this.username),this.startMainApp()}drawMessage(e){const t=document.createElement("div");t.classList.add("mainChat");const i=document.createElement("div"),n=document.createElement("nameEncapsulate"),s=document.createElement("p");n.classList.add("userNameBox"),n.appendChild(s);const a=document.createElement("p");a.classList.add("chatBody"),i.classList.add("chatBubble");const r=JSON.parse(e);s.innerHTML=r.username,console.log(e),(r.type==="message"||r.type==="notification")&&(r.username===this.username&&this.isItMeWhoSent?(console.log("me who sent"),i.style.background="rgba(55, 219, 145, 0.7)"):i.style.background="rgba(34, 79, 225, 0.7)",r.username==="The Server"&&(i.style.background="green"),this.isItMeWhoSent=!1,a.innerHTML=r.data,this.chat.scrollTo(0,document.body.scrollHeight),t.appendChild(i),i.appendChild(n),i.appendChild(a),this.chat.appendChild(t))}}const d=[{question:"What is 1+1?",alternatives:{a:"10",b:"2",c:"110"},answer:"b"},{question:"How tall is the burj khaliffa",alternatives:{a:"460",b:"920",c:"828"},answer:"c"},{question:"How many contries are there?",alternatives:{a:"195",b:"200",c:"120"},answer:"a"},{question:"How big is Växjö?",alternatives:{a:"29,29 km2",b:"34,41 km2",c:"45,19 km2"},answer:"a"},{question:"What color is an orange?",alternatives:{a:"pink",b:"orange",c:"green"},answer:"b"}];class S{constructor(){this.container=document.createElement("div"),this.question=document.createElement("h1"),this.score=document.createElement("p"),this.questionCounter=0,this.drawQuiz()}get getContainer(){return this.container}drawQuiz(){this.score.innerHTML="Question number: "+(this.questionCounter+1),this.question.innerHTML=d[this.questionCounter].question,this.container.appendChild(this.question);const e=document.createElement("div");this.container.appendChild(e),this.container.appendChild(this.score);for(const t in d[this.questionCounter].alternatives){const i=document.createElement("input"),n=document.createElement("label");n.innerHTML=d[this.questionCounter].alternatives[t],i.type="radio",i.value=d[this.questionCounter].alternatives[t],e.appendChild(i),e.appendChild(n),i.addEventListener("click",()=>{this.container.removeChild(e),this.getAnswer(t)})}}getAnswer(e){if(e===d[this.questionCounter].answer[0])if(this.questionCounter++,this.questionCounter===d.length){this.question.innerHTML="You won Congratulations",this.score.innerHTML="You mananaged to correctly guess: "+this.questionCounter+"/"+d.length+" questions";const t=document.createElement("button");t.innerHTML="Restart Game",this.container.appendChild(t),t.addEventListener("click",()=>{this.questionCounter=0,this.container.removeChild(t),this.drawQuiz()})}else this.drawQuiz();else{this.question.innerHTML="Wrong answer!",this.score.innerHTML="You mananaged to correctly guess: "+this.questionCounter+"/"+d.length+" questions";const t=document.createElement("button");t.innerHTML="Restart Game",this.container.appendChild(t),t.addEventListener("click",()=>{this.questionCounter=0,this.container.removeChild(t),this.drawQuiz()})}}}document.getElementById("btn1")?.addEventListener("click",x);document.getElementById("btn2")?.addEventListener("click",q);document.getElementById("btn3")?.addEventListener("click",I);const g=new C;let f=0;function x(){u(new k().getContainer,new URL("/assets/back-77c6763f.png",self.location).href,"Memory Game","200","250")}function q(){u(new M().getContainer,new URL("/assets/chatIcon-84ec055b.png",self.location).href,"Chat Application","250","500")}function I(){u(new S().getContainer,new URL("/assets/sample-6c103ccc.png",self.location).href,"Quiz Application","400","300")}function u(l,e,t,i,n){f++;const s=new w(l,e,t,i,n,f,g);g.pushWindow(s)}
